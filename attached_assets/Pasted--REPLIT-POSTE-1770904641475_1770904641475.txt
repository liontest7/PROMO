ככה אמור לעבוד כל המערכת עם האחסון נפרד והכל אבל כרגע לדעתי חיברת אותו שוב ל REPLIT צריך ליצור POSTERSQL חיצוני שבעתיד אני יעלה ל RAILWAY ויפתח שם או אם אפשר כבר ליצור אותו מעכשיו ושאני יעלה ל RAILWAY לקשר את זה גם שם ויהיה לנו 2 מסדי נתנוים אחד לבדיקה אחד אמיתי כדי שלא יפגע בתחזוקה וטיפול של המערכת תוודא שהכל עובד כמו שצריך ואם אתה יכול כבר תיצור ותחבר את האחסון האחיצוני שצריך ואם אי אפשר אז למחוק את מה שיש כרגע של REPLIT ולחכות עד שאני יפתח ויביא לך את ה SECRET שצריך וגם בקונסול אני רואה שזה מחפש קמפיינםי הרבה פעמיים זה לא בעיה שזה סתם שולח מלא קריאות לא עדיף שזה יעבוד הרבה יותר חכם וגם בעמוד הראשי שאם עדיןי אין קמפיינים שלא יהיה ריק רק כותרת שיהיה למטה אזור עם הודעה באנגלית טועם לעיצוב של המערכת שלנו שיהיה רשום שעדין לא נוצרו קמפיינים והמערכת מחכה שיעלה קמפיינים או משהו כזה כמובן באנגלית כמו כל המערכת שלנו .

We need to fully switch this app to our new external PostgreSQL environments and stop using any old/internal DB state.

Please do the following for this Repl:

Remove old/internal DB coupling
Detach/disable any legacy Replit DB bindings or previous DATABASE_URL values.
Ensure the app uses ONLY the DATABASE_URL we provide in Secrets.
Set clean environment secrets for STAGING (devnet)
NODE_ENV=production
PORT=5000
DATABASE_URL=<external_staging_postgres_url>
SESSION_SECRET=<strong_random_secret>
SOLANA_CLUSTER=devnet
SOLANA_RPC_ENDPOINTS=<comma-separated devnet RPCs>
REWARDS_PAYOUTS_ENABLED=false
SMART_CONTRACT_ENABLED=true
SMART_CONTRACT_PROGRAM_ID=<devnet_program_id>
SMART_CONTRACT_CLAIMS_FALLBACK_TO_TRANSFER=true
SYSTEM_WALLET_PRIVATE_KEY=<base58_key>
PAYOUT_FAILURE_ALERT_THRESHOLD_PERCENT=15
RPC_ERROR_ALERT_THRESHOLD_COUNT=5
Confirm app behavior after restart
Start app and verify it boots using external DATABASE_URL.
Confirm /api/admin/stats responds with admin session (not empty due to wrong DB).
Confirm /api/admin/users and /api/admin/campaigns return data from the new external staging DB.
Session/auth behavior
Keep cookies/sessions enabled (admin routes are session-based).
We login via wallet challenge/signature and then admin APIs rely on session cookie.
Data reset policy
We accept starting staging as a clean DB for testing.
If needed, run schema/migrations on the new external DB, then we will seed test data manually.
Production separation
We will use a separate production DATABASE_URL and separate mainnet program ID.
No shared writable DB between staging and production.